<HTML>
	<HEAD>
		<TITLE>Kitchen</TITLE>
	</HEAD>

	<BODY>
		<script TYPE="TEXT/JAVASCRIPT" SRC="http://d3js.org/d3.v3.min.js"></script>
		<script>

			//Load a csv file and generate a tree of data.
			d3.csv("timedata.csv", function(csv) {
				var nested_data = d3.nest()
					.key(function(d) {return d.departmentID;})
						.sortKeys(d3.ascending)
					.key(function(d) {return d.employee;})
						.sortKeys(d3.ascending)
					.key(function(d) {return d.client;})
						.sortKeys(d3.ascending)
					.entries(csv);

				console.log(nested_data);

				d3.select("body")
					.append("select")
					.selectAll("option")
					.data(nested_data)
					.enter()
					.append("option")
					.text(function(d, i) {return d.key;});
			

				d3.select('select')
				    .on("change", function() {

					    var indexKey = this.options[this.selectedIndex].value;
					
					    d3.select("body").selectAll("div")
							.data(nested_data)
							.enter()
							.append("div")
							.text(function(d,i) {

								var nameArray = [];

								if (d.key == indexKey){
 
									for (var g = 0; g < d.values.length; g++ ) { 
									   
										nameArray.push(d.values[g].key);

									}

								}

								return nameArray;

							});

					});

			});
				

		</script>
	</BODY>
</HTML>
